---
import BaseLayout from './BaseLayout.astro';
import Section from '@components/ui/Section.astro';
import Container from '@components/ui/Container.astro';
import Button from '@components/ui/Button.astro';
import Badge from '@components/ui/Badge.astro';
import GlowText from '@components/ui/GlowText.astro';
import { brand } from '@content/copy';

interface HeroMetric {
  value: string;
  label: string;
}

interface Props {
  title: string;
  description: string;
  badge: string;
  headline: string;
  subheadline: string;
  heroMetrics?: HeroMetric[];
  ctaLabel?: string;
  ctaHref?: string;
  secondaryCtaLabel?: string;
  secondaryCtaHref?: string;
}

const {
  title,
  description,
  badge,
  headline,
  subheadline,
  heroMetrics = [],
  ctaLabel = 'Request a Quote',
  ctaHref = '/contact',
  secondaryCtaLabel,
  secondaryCtaHref,
} = Astro.props;
---

<BaseLayout title={`${title} | Services`} description={description}>

  <!-- BREADCRUMB + HERO -->
  <Section background="base" padding="sm" class="pt-24 md:pt-28 pb-8 md:pb-12 relative overflow-hidden">
    <!-- Ambient glow -->
    <div class="absolute inset-0 pointer-events-none" aria-hidden="true">
      <div class="absolute top-0 right-0 w-[500px] h-[500px] bg-accent-primary/5 rounded-full blur-[120px] -translate-y-1/2 translate-x-1/4"></div>
      <div class="absolute bottom-0 left-0 w-[400px] h-[400px] bg-accent-violet/5 rounded-full blur-[100px] translate-y-1/2 -translate-x-1/4"></div>
    </div>

    <Container class="relative">
      <!-- Breadcrumb -->
      <nav class="flex items-center gap-2 text-sm text-text-tertiary mb-8 scroll-reveal" aria-label="Breadcrumb">
        <a href="/" class="hover:text-text-secondary transition-colors no-underline">Home</a>
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" aria-hidden="true"><path d="m9 18 6-6-6-6"/></svg>
        <a href="/services" class="hover:text-text-secondary transition-colors no-underline">Services</a>
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" aria-hidden="true"><path d="m9 18 6-6-6-6"/></svg>
        <span class="text-text-secondary">{title}</span>
      </nav>

      <!-- Hero content -->
      <div class="max-w-4xl scroll-reveal">
        <Badge variant="primary" class="mb-5">{badge}</Badge>
        <h1 class="text-[length:var(--font-size-hero)] font-bold leading-[1.1] text-text-primary mb-6">
          {headline}
        </h1>
        <p class="text-[length:var(--font-size-body-lg)] text-text-secondary max-w-3xl leading-relaxed mb-8">
          {subheadline}
        </p>

        <div class="flex flex-col sm:flex-row items-start gap-4 mb-10">
          <Button href={ctaHref} variant="primary" size="lg" arrow glow>
            {ctaLabel}
          </Button>
          {secondaryCtaLabel && secondaryCtaHref && (
            <Button href={secondaryCtaHref} variant="outline" size="lg">
              {secondaryCtaLabel}
            </Button>
          )}
        </div>
      </div>

      <!-- Hero metrics -->
      {heroMetrics.length > 0 && (
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6 max-w-3xl scroll-reveal" style="animation-delay: 100ms;">
          {heroMetrics.map((metric) => (
            <div class="text-center p-4 rounded-xl bg-bg-surface-1/50 border border-border/50">
              <div class="text-2xl md:text-3xl font-mono font-bold text-accent-primary mb-1">{metric.value}</div>
              <div class="text-xs text-text-tertiary">{metric.label}</div>
            </div>
          ))}
        </div>
      )}
    </Container>
  </Section>

  <!-- MAIN CONTENT (from individual service pages via default slot) -->
  <slot />

  <!-- BOTTOM CTA -->
  <Section background="gradient" padding="lg">
    <Container class="text-center">
      <h2 class="text-[length:var(--font-size-h2)] font-bold text-text-primary leading-tight mb-4">
        Ready to Get Started?
      </h2>
      <p class="text-[length:var(--font-size-body-lg)] text-text-secondary max-w-xl mx-auto mb-10">
        Every engagement starts with a free discovery call. No commitments, no sales pressure â€” just an honest assessment of how we can help.
      </p>
      <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
        <Button href="/contact" variant="primary" size="lg" arrow glow>
          Book a Free Consultation
        </Button>
        <span class="text-text-secondary text-sm">
          or email <a href={`mailto:${brand.email}`} class="text-accent-primary hover:underline no-underline">{brand.email}</a>
        </span>
      </div>
    </Container>
  </Section>

</BaseLayout>
