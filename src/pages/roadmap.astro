---
import BaseLayout from '../layouts/BaseLayout.astro';
import Section from '../components/ui/Section.astro';
import Container from '../components/ui/Container.astro';
import Badge from '../components/ui/Badge.astro';
import Button from '../components/ui/Button.astro';
import TextReveal from '../components/ui/TextReveal';
import RoadmapTimeline from '../components/ui/RoadmapTimeline';
import { roadmap, brand } from '../content/copy';
---

<BaseLayout
  title="Roadmap"
  description="Explore Lumina ERP's strategic roadmap â€” four phases of growth from core P21 services to SaaS tools, community resources, and industry events."
  schemaType="about"
>

  <!-- Hero -->
  <Section background="base" padding="sm" class="pt-28 md:pt-32 pb-8 md:pb-12 relative overflow-hidden">
    <div class="absolute top-0 right-0 w-96 h-96 bg-accent-primary/5 rounded-full blur-3xl pointer-events-none"></div>
    <div class="absolute bottom-0 left-0 w-72 h-72 bg-accent-violet/5 rounded-full blur-3xl pointer-events-none"></div>
    <Container>
      <div class="max-w-3xl scroll-reveal">
        <Badge variant="primary" class="mb-6">{roadmap.hero.badge}</Badge>
        <TextReveal
          text={roadmap.hero.headline}
          as="h1"
          className="text-[length:var(--font-size-hero)] font-bold leading-[1.1] text-text-primary mb-4"
          client:visible
        />
        <p class="text-[length:var(--font-size-body-lg)] text-text-secondary max-w-2xl leading-relaxed mb-10">
          {roadmap.hero.subtitle}
        </p>

        <!-- Stat row -->
        <div class="grid grid-cols-3 gap-6 max-w-md">
          {roadmap.hero.stats.map((stat) => (
            <div class="text-center">
              <div class="text-2xl md:text-3xl font-bold text-text-primary font-mono">{stat.value}</div>
              <div class="text-xs md:text-sm text-text-tertiary mt-1">{stat.label}</div>
            </div>
          ))}
        </div>
      </div>
    </Container>
  </Section>

  <!-- Sticky Phase Navigation -->
  <div class="sticky top-16 z-30 bg-bg-base/90 backdrop-blur-lg border-b border-border/50" id="phase-nav">
    <Container>
      <nav class="flex gap-2 py-3 overflow-x-auto scrollbar-hide" role="tablist" aria-label="Roadmap phases">
        {roadmap.phases.map((phase) => (
          <a
            href={`#phase-${phase.id}`}
            role="tab"
            class="shrink-0 flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium border border-border/50 hover:border-accent-primary/30 transition-colors bg-bg-surface-1/50 hover:bg-bg-surface-2/50"
          >
            <span class="w-2 h-2 rounded-full shrink-0" style={`background: ${phase.color};`}></span>
            <span class="text-text-secondary whitespace-nowrap">
              <span class="text-text-tertiary font-mono text-xs mr-1">0{phase.id}</span>
              {phase.title}
            </span>
            <span class="text-text-tertiary text-xs hidden sm:inline">{phase.timeframe}</span>
          </a>
        ))}
      </nav>
    </Container>
  </div>

  <!-- Interactive Timeline -->
  <Section background="base" padding="lg">
    <Container>
      <RoadmapTimeline phases={roadmap.phases} client:visible />
    </Container>
  </Section>

  <!-- Vision Statement -->
  <Section background="surface-1" padding="md">
    <Container>
      <div class="max-w-2xl mx-auto text-center relative scroll-reveal">
        <div class="absolute inset-0 -m-8 bg-accent-primary/3 rounded-2xl blur-2xl pointer-events-none"></div>
        <div class="relative bg-bg-surface-1/40 backdrop-blur-sm border border-border/50 rounded-2xl p-8 md:p-12">
          <h2 class="text-[length:var(--font-size-h2)] font-bold text-text-primary mb-4">
            {roadmap.vision.heading}
          </h2>
          <p class="text-[length:var(--font-size-body-lg)] text-text-secondary leading-relaxed">
            {roadmap.vision.body}
          </p>
        </div>
      </div>
    </Container>
  </Section>

  <!-- Bottom CTA -->
  <Section background="gradient" padding="lg">
    <Container>
      <div class="text-center max-w-2xl mx-auto scroll-reveal">
        <h2 class="text-[length:var(--font-size-h2)] font-bold text-text-primary mb-4">
          {roadmap.cta.heading}
        </h2>
        <p class="text-[length:var(--font-size-body-lg)] text-text-secondary mb-8">
          {roadmap.cta.subheading}
        </p>
        <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
          <Button href={roadmap.cta.buttonHref} arrow glow>{roadmap.cta.buttonLabel}</Button>
        </div>
        <p class="mt-6 text-text-tertiary text-sm">
          Or email us directly at <a href={`mailto:${roadmap.cta.email}`} class="text-accent-primary hover:underline">{roadmap.cta.email}</a>
        </p>
      </div>
    </Container>
  </Section>

</BaseLayout>

<style>
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
</style>
