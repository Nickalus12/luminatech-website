---
import ServiceDetailLayout from '@layouts/ServiceDetailLayout.astro';
import Section from '@components/ui/Section.astro';
import Container from '@components/ui/Container.astro';
import Card from '@components/ui/Card.astro';
import Badge from '@components/ui/Badge.astro';
import GlowText from '@components/ui/GlowText.astro';
import Button from '@components/ui/Button.astro';

const heroMetrics = [
  { value: '25%', label: 'Picker Travel Reduction' },
  { value: '0', label: 'Invalid Pick Tickets' },
  { value: '$2K', label: 'Starting Investment' },
  { value: '60-Day', label: 'Warranty Included' },
];
---

<ServiceDetailLayout
  title="Warehouse Automation Solutions"
  description="Automate P21 pick ticket routing, bin allocation, carrier assignment, and shipping workflows. Reduce picker travel time and eliminate manual processes without expensive WMS platforms."
  badge="Warehouse Automation"
  headline="Automate Pick Ticket Routing, Bin Allocation, and Shipping Workflows"
  subheadline="Reduce picker travel time, eliminate manual bin selection, and integrate RF scanners with P21 -- without expensive WMS platforms."
  heroMetrics={heroMetrics}
  ctaLabel="Request Warehouse Automation Consultation"
  ctaHref="/contact"
  secondaryCtaLabel="Download Automation Guide"
  secondaryCtaHref="/contact"
>

  <!-- WAREHOUSE AUTOMATIONS WE BUILD -->
  <Section background="surface-1" padding="md">
    <Container>
      <div class="text-center mb-12 scroll-reveal">
        <Badge variant="primary" class="mb-5">What We Build</Badge>
        <h2 class="text-[length:var(--font-size-h2)] font-bold text-text-primary leading-tight mb-4">
          Warehouse Automations We Build
        </h2>
        <p class="text-[length:var(--font-size-body-lg)] text-text-secondary max-w-2xl mx-auto leading-relaxed">
          Every automation is built directly on P21, using DynaChange rules, SQL triggers, or N8N workflows -- no separate WMS required.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {[
          {
            icon: 'route',
            title: 'Dynamic Bin Routing',
            description: 'Quantity-based allocation automatically routes small orders to eaches bins and large orders to pallet bins.',
          },
          {
            icon: 'truck',
            title: 'Carrier Auto-Assignment',
            description: 'Route orders by ship-to zone, weight threshold, or customer default carrier -- no manual selection required.',
          },
          {
            icon: 'shield',
            title: 'Pick Ticket Validation',
            description: 'Block invalid pick tickets before they print. Prevent ShipLink failures by enforcing carrier assignment.',
          },
          {
            icon: 'label',
            title: 'Shipping Label Generation',
            description: 'Integrate with ShipLink, UPS WorldShip, and marketplace platforms for automated label creation.',
          },
          {
            icon: 'cycle',
            title: 'Cycle Count Scheduling',
            description: 'Automated ABC analysis based on item movement frequency, with count list generation for RF scanners.',
          },
          {
            icon: 'packing',
            title: 'Packing List Customization',
            description: 'Custom Crystal Report or SSRS templates with barcodes, QR codes, and customer-specific branding.',
          },
        ].map((automation, i) => (
          <Card class="scroll-reveal" style={`animation-delay: ${i * 80}ms;`}>
            <div class="w-10 h-10 rounded-lg bg-accent-primary/10 flex items-center justify-center mb-4">
              {automation.icon === 'route' && (
                <svg class="w-5 h-5 text-accent-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="6" cy="19" r="3" /><path d="M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15" /><circle cx="18" cy="5" r="3" /></svg>
              )}
              {automation.icon === 'truck' && (
                <svg class="w-5 h-5 text-accent-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 3h15v13H1z" /><path d="M16 8h4l3 3v5h-7V8z" /><circle cx="5.5" cy="18.5" r="2.5" /><circle cx="18.5" cy="18.5" r="2.5" /></svg>
              )}
              {automation.icon === 'shield' && (
                <svg class="w-5 h-5 text-accent-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" /></svg>
              )}
              {automation.icon === 'label' && (
                <svg class="w-5 h-5 text-accent-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" /><line x1="7" y1="7" x2="7.01" y2="7" /></svg>
              )}
              {automation.icon === 'cycle' && (
                <svg class="w-5 h-5 text-accent-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2" /></svg>
              )}
              {automation.icon === 'packing' && (
                <svg class="w-5 h-5 text-accent-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" /><polyline points="14 2 14 8 20 8" /><line x1="16" y1="13" x2="8" y2="13" /><line x1="16" y1="17" x2="8" y2="17" /></svg>
              )}
            </div>
            <h3 class="text-lg font-semibold text-text-primary mb-2">{automation.title}</h3>
            <p class="text-sm text-text-secondary leading-relaxed">{automation.description}</p>
          </Card>
        ))}
      </div>
    </Container>
  </Section>

  <!-- INTEGRATION CAPABILITIES -->
  <Section background="base" padding="md">
    <Container>
      <div class="text-center mb-12 scroll-reveal">
        <Badge variant="success" class="mb-5">Integrations</Badge>
        <h2 class="text-[length:var(--font-size-h2)] font-bold text-text-primary leading-tight mb-4">
          Integration Capabilities
        </h2>
        <p class="text-[length:var(--font-size-body-lg)] text-text-secondary max-w-2xl mx-auto leading-relaxed">
          Our warehouse automations connect directly with the hardware and software your team already uses.
        </p>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
        {[
          { title: 'RF Scanners', items: ['Zebra MC-Series', 'Honeywell Dolphin', 'P21 RF Module'], color: 'accent-primary' },
          { title: 'Shipping Systems', items: ['ShipLink', 'SellerCloud', 'ShipStation'], color: 'accent-violet' },
          { title: 'Label Printers', items: ['Zebra ZPL', 'Dymo LabelWriter', 'Brother QL-Series'], color: 'accent-success' },
          { title: 'Conveyor Systems', items: ['PLC via Modbus', 'OPC Integration', 'Custom Controllers'], color: 'accent-warning' },
        ].map((category, i) => (
          <div class="scroll-reveal p-6 rounded-xl bg-bg-surface-1 border border-border/50 hover:border-accent-primary/30 transition-colors duration-300" style={`animation-delay: ${i * 80}ms;`}>
            <h3 class="text-base font-semibold text-text-primary mb-4">{category.title}</h3>
            <ul class="space-y-2">
              {category.items.map((item) => (
                <li class="flex items-center gap-2 text-sm text-text-secondary">
                  <svg class={`w-4 h-4 text-${category.color} shrink-0`} fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5" /></svg>
                  {item}
                </li>
              ))}
            </ul>
          </div>
        ))}
      </div>
    </Container>
  </Section>

  <!-- DEPLOYMENT OPTIONS TABLE -->
  <Section background="surface-1" padding="md">
    <Container>
      <div class="text-center mb-12 scroll-reveal">
        <Badge variant="primary" class="mb-5">Flexible Deployment</Badge>
        <h2 class="text-[length:var(--font-size-h2)] font-bold text-text-primary leading-tight mb-4">
          Deployment Options
        </h2>
        <p class="text-[length:var(--font-size-body-lg)] text-text-secondary max-w-2xl mx-auto leading-relaxed">
          We choose the right approach based on your requirements. Every method integrates natively with P21.
        </p>
      </div>

      <div class="max-w-4xl mx-auto scroll-reveal" style="animation-delay: 100ms;">
        <div class="overflow-x-auto rounded-xl border border-border">
          <table class="w-full text-left">
            <thead>
              <tr class="bg-bg-surface-2">
                <th class="px-6 py-4 text-sm font-semibold text-text-primary">Approach</th>
                <th class="px-6 py-4 text-sm font-semibold text-text-primary">Speed</th>
                <th class="px-6 py-4 text-sm font-semibold text-text-primary">Flexibility</th>
                <th class="px-6 py-4 text-sm font-semibold text-text-primary">Cost</th>
              </tr>
            </thead>
            <tbody>
              {[
                { approach: 'N8N Automation', speed: 'Fast (days)', flexibility: 'High (visual editor)', cost: 'Low', highlight: true },
                { approach: 'DynaChange Rule', speed: 'Medium (weeks)', flexibility: 'Medium (recompile)', cost: 'Medium', highlight: false },
                { approach: 'SQL Trigger', speed: 'Fast (days)', flexibility: 'Low (database-only)', cost: 'Low', highlight: false },
                { approach: 'Custom Application', speed: 'Slow (months)', flexibility: 'High (full control)', cost: 'High', highlight: false },
              ].map((row, i) => (
                <tr class:list={["border-t border-border/50", row.highlight ? "bg-accent-primary/5" : i % 2 === 0 ? "bg-bg-surface-1/50" : "bg-bg-base"]}>
                  <td class="px-6 py-4 text-sm font-medium text-text-primary">
                    {row.highlight && <span class="inline-block w-2 h-2 rounded-full bg-accent-primary mr-2"></span>}
                    {row.approach}
                  </td>
                  <td class="px-6 py-4 text-sm text-text-secondary">{row.speed}</td>
                  <td class="px-6 py-4 text-sm text-text-secondary">{row.flexibility}</td>
                  <td class="px-6 py-4 text-sm text-text-secondary">{row.cost}</td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>
    </Container>
  </Section>

  <!-- FEATURED SOLUTION: Dynamic Bin Routing -->
  <Section background="base" padding="lg">
    <Container>
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-start">
        <!-- Left: Description -->
        <div class="scroll-reveal">
          <Badge variant="success" class="mb-5">Featured Solution</Badge>
          <h2 class="text-[length:var(--font-size-h2)] font-bold text-text-primary leading-tight mb-6">
            Dynamic Bin Quantity Routing
          </h2>
          <p class="text-[length:var(--font-size-body-lg)] text-text-secondary leading-relaxed mb-6">
            Small Costco.com orders (1-2 units) were allocating to BULK pallet bins. Pickers walked across the warehouse when inventory existed in nearby EACHES bins.
          </p>

          <div class="space-y-4 mb-8">
            <h3 class="text-[length:var(--font-size-h4)] font-semibold text-text-primary">How It Works</h3>
            <div class="space-y-3">
              {[
                { label: 'Small Orders', detail: '(below threshold) route to EACHES bin (e.g., B52025)', color: 'accent-success' },
                { label: 'Large Orders', detail: '(at or above threshold) route to PALLET bin (e.g., A70160)', color: 'accent-primary' },
              ].map((rule) => (
                <div class="flex items-start gap-3 p-3 rounded-lg bg-bg-surface-1 border border-border/50">
                  <div class={`w-3 h-3 rounded-full bg-${rule.color} mt-1 shrink-0`}></div>
                  <p class="text-sm text-text-secondary">
                    <span class="font-medium text-text-primary">{rule.label}</span> {rule.detail}
                  </p>
                </div>
              ))}
            </div>
          </div>

          <div class="grid grid-cols-2 gap-4">
            {[
              { label: 'Automated bin selection', icon: 'check' },
              { label: 'Reduced picker travel', icon: 'check' },
              { label: 'No code changes needed', icon: 'check' },
              { label: 'Full audit trail', icon: 'check' },
            ].map((result) => (
              <div class="flex items-center gap-2 text-sm text-text-secondary">
                <svg class="w-4 h-4 text-accent-success shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5" /></svg>
                {result.label}
              </div>
            ))}
          </div>
        </div>

        <!-- Right: Architecture diagram -->
        <div class="scroll-reveal" style="animation-delay: 150ms;">
          <div class="rounded-xl bg-bg-surface-1 border border-border p-6">
            <h4 class="text-sm font-semibold text-text-tertiary uppercase tracking-wider mb-4">Architecture: N8N Polling (5-min interval)</h4>
            <pre class="text-sm font-mono text-text-secondary leading-relaxed overflow-x-auto"><code class="text-accent-primary">N8N Trigger</code> (every 5 min)
  |
  v
<code class="text-accent-primary">Query:</code> Recent pick tickets (last 10 min)
  |
  v
<code class="text-accent-primary">Filter:</code> Items in TDP_Bin_Routing_Config
  |
  v
<code class="text-accent-primary">Decision:</code> qty &lt; threshold?
  |--- Yes --&gt; Move to <code class="text-accent-success">EACHES</code> bin
  |--- No  --&gt; Move to <code class="text-accent-violet">PALLET</code> bin
  |
  v
<code class="text-accent-primary">Call:</code> p21_move_document_allocation
  |
  v
<code class="text-accent-primary">Log:</code> Success/failure to audit table</pre>
          </div>

          <div class="mt-6 rounded-xl bg-bg-surface-1 border border-border p-6">
            <h4 class="text-sm font-semibold text-text-tertiary uppercase tracking-wider mb-4">Configuration Table</h4>
            <div class="overflow-x-auto">
              <pre class="bg-[#0d0d14] rounded-lg p-4 text-sm font-mono leading-relaxed overflow-x-auto"><code><span class="text-accent-primary">CREATE TABLE</span> <span class="text-accent-success">TDP_Bin_Routing_Config</span> (
    inv_mast_uid    <span class="text-accent-violet">INT</span> <span class="text-accent-primary">NOT NULL</span>,
    item_id         <span class="text-accent-violet">VARCHAR(40)</span>,
    location_id     <span class="text-accent-violet">DECIMAL(19,0)</span>,
    qty_threshold   <span class="text-accent-violet">DECIMAL(19,4)</span>,
    eaches_bin      <span class="text-accent-violet">VARCHAR(10)</span>,
    pallet_bin      <span class="text-accent-violet">VARCHAR(10)</span>,
    active_flag     <span class="text-accent-violet">CHAR(1)</span> <span class="text-accent-primary">DEFAULT</span> <span class="text-accent-warning">'Y'</span>
)</code></pre>
            </div>
          </div>
        </div>
      </div>
    </Container>
  </Section>

  <!-- ADDITIONAL AUTOMATIONS -->
  <Section background="base" padding="md">
    <Container>
      <div class="text-center mb-12 scroll-reveal">
        <Badge variant="primary" class="mb-5">More Automations</Badge>
        <h2 class="text-[length:var(--font-size-h2)] font-bold text-text-primary leading-tight mb-4">
          Additional Warehouse Automations
        </h2>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto">
        {[
          {
            num: '1',
            title: 'Auto-Carrier Assignment',
            trigger: 'Order save or batch assignment',
            benefit: 'Eliminates manual carrier selection',
            description: 'Routes orders by customer default carrier or ship-to zone automatically.',
          },
          {
            num: '2',
            title: 'Packing List Customization',
            trigger: 'Pick ticket print',
            benefit: 'Professional branding per customer',
            description: 'Custom Crystal Report or SSRS template with barcode, QR code for tracking.',
          },
          {
            num: '3',
            title: 'Cycle Count Optimization',
            trigger: 'Scheduled (weekly/monthly)',
            benefit: 'Targeted counts reduce downtime',
            description: 'ABC analysis based on movement frequency with automated count list generation.',
          },
          {
            num: '4',
            title: 'Shipping Label Integration',
            trigger: 'Shipment complete',
            benefit: 'End-to-end tracking automation',
            description: 'Pull tracking from ShipLink/UPS, update P21 Complete_Tracking, sync to marketplaces.',
          },
        ].map((automation, i) => (
          <Card class="scroll-reveal" style={`animation-delay: ${i * 80}ms;`}>
            <div class="flex items-start gap-4">
              <div class="w-10 h-10 flex items-center justify-center rounded-lg bg-accent-primary/10 shrink-0">
                <span class="text-sm font-mono font-bold text-accent-primary">{automation.num}</span>
              </div>
              <div>
                <h3 class="text-lg font-semibold text-text-primary mb-1">{automation.title}</h3>
                <p class="text-sm text-text-secondary leading-relaxed mb-3">{automation.description}</p>
                <div class="flex flex-wrap gap-3 text-xs">
                  <span class="px-2 py-1 rounded bg-bg-surface-2 text-text-tertiary">
                    Trigger: {automation.trigger}
                  </span>
                  <span class="px-2 py-1 rounded bg-accent-success/10 text-accent-success">
                    {automation.benefit}
                  </span>
                </div>
              </div>
            </div>
          </Card>
        ))}
      </div>
    </Container>
  </Section>

  <!-- PRICING & DELIVERABLES -->
  <Section background="surface-1" padding="lg">
    <Container>
      <div class="text-center mb-12 scroll-reveal">
        <Badge variant="success" class="mb-5">Transparent Pricing</Badge>
        <h2 class="text-[length:var(--font-size-h2)] font-bold text-text-primary leading-tight mb-4">
          Pricing & Deliverables
        </h2>
        <p class="text-[length:var(--font-size-body-lg)] text-text-secondary max-w-2xl mx-auto leading-relaxed">
          95% less investment than full WMS implementations ($50K-$250K). Our automations deliver faster ROI.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
        {[
          { title: 'Simple Validation Rule', range: '$2,000 - $4,000', example: 'Carrier check, field validation' },
          { title: 'Bin Routing Automation', range: '$5,000 - $8,000', example: 'Dynamic allocation + config table' },
          { title: 'Carrier + Labeling', range: '$6,000 - $10,000', example: 'Auto-assign + label generation' },
          { title: 'Full Automation Suite', range: '$15,000 - $30,000', example: 'Complete warehouse package' },
        ].map((tier, i) => (
          <div class="scroll-reveal p-6 rounded-xl bg-bg-surface-2/50 border border-border/50 hover:border-accent-primary/30 transition-colors duration-300" style={`animation-delay: ${i * 80}ms;`}>
            <h3 class="text-base font-semibold text-text-primary mb-2">{tier.title}</h3>
            <div class="text-xl font-mono font-bold text-accent-primary mb-2">{tier.range}</div>
            <p class="text-xs text-text-tertiary">{tier.example}</p>
          </div>
        ))}
      </div>

      <!-- Timeline -->
      <div class="max-w-3xl mx-auto scroll-reveal" style="animation-delay: 100ms;">
        <h3 class="text-[length:var(--font-size-h3)] font-semibold text-text-primary mb-6 text-center">Project Timeline</h3>
        <div class="space-y-4">
          {[
            { phase: 'Discovery', duration: '2-3 days', detail: 'Workflow mapping, pain point analysis' },
            { phase: 'Development', duration: '1-3 weeks', detail: 'Rule or workflow building, configuration tables' },
            { phase: 'PLAY Testing', duration: '3-5 days', detail: 'Environment validation with real scenarios' },
            { phase: 'Pilot', duration: '1-2 weeks', detail: 'Production with limited items/users' },
            { phase: 'Rollout', duration: '1 week', detail: 'Full deployment and user training' },
          ].map((step, i) => (
            <div class="flex items-start gap-4 p-4 rounded-lg bg-bg-surface-1 border border-border/50">
              <div class="shrink-0 w-20 text-right">
                <span class="text-sm font-mono font-bold text-accent-primary">{step.duration}</span>
              </div>
              <div class="grow border-l-2 border-accent-primary/30 pl-4">
                <h4 class="font-semibold text-text-primary text-sm">{step.phase}</h4>
                <p class="text-sm text-text-secondary">{step.detail}</p>
              </div>
            </div>
          ))}
        </div>
      </div>

      <!-- What You Get -->
      <div class="max-w-3xl mx-auto mt-10 scroll-reveal" style="animation-delay: 200ms;">
        <Card hover={false} padding="lg">
          <h3 class="text-lg font-semibold text-text-primary mb-4">What You Get</h3>
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
            {[
              'Custom business rule or N8N workflow',
              'Configuration tables and UI',
              'SQL scripts for setup',
              'PLAY environment testing results',
              'Pilot plan with success metrics',
              'User training and documentation',
              '60-day warranty on automation logic',
              'Source code included',
            ].map((item) => (
              <div class="flex items-center gap-2 text-sm text-text-secondary">
                <svg class="w-4 h-4 text-accent-success shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5" /></svg>
                {item}
              </div>
            ))}
          </div>
        </Card>
      </div>
    </Container>
  </Section>

</ServiceDetailLayout>
